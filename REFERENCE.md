# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`supervisor`](#supervisor): Class: supervisor   @summary    This module manages supervisor  Parameters:    @param autoupgrade     Upgrade package automatically, if there

#### Private Classes

* `supervisor::config`: This class handles the configuration files and related settings.
* `supervisor::install`: This class handles package/plugins installation.
* `supervisor::system_service`: This class handles the service and related settings.
* `supervisor::update`: This class handles the update of supervisor managed services.

### Defined types

* [`supervisor::service`](#supervisorservice): Service defintion

## Classes

### <a name="supervisor"></a>`supervisor`

Class: supervisor

 @summary
   This module manages supervisor

Parameters:

  @param autoupgrade
    Upgrade package automatically, if there is a newer version.
    Default: false

  @param bin_dir
    Supervisord binary dir location. Supervisord gets installed through python-pip.

  @param childlogdir
    The directory used for AUTO child log files.
    Default: /var/log/supervisor

  @param chmod
    Boolean to manage chmod.
    Default: false

  @param chown
    Boolean to manage chown.
    Default: false

  @param conf_dir
    Config dir location

  @param conf_ext
    Extension of the config file to load. Default: '.conf '

  @param conf_file
    Location of the supervisord main configuration file. Default: ~ (see data/ per OS)

  @param dir_ensure
    Manage the config directory. Default: directory

  @param enable_inet_server
    Enable inet_http_server.
    Default: false

  @param file_ensure
    Manage the config file presence. Default: present

  @param identifier
    The identifier string for this supervisor process,
    used by the RPC interface.
    Default: undef

  @param include_files
    Array to include additional config files. Default: []

  @param inet_server_port
    inet_http_server ip:port to listen on.
    Only used if inet_http_server is set to true.
    Default: \*:9000

  @param inet_server_user
    If set, this is the name of the user to authenticate as.
    Only used if inet_http_server is set to true.
    Default: undef

  @param inet_server_pass
    Password for the inet_http_server.
    Only used if inet_http_server is set to true and inet_server_user is set.
    Default: undef

  @param init_script
    Location of the init script / systemd service file. Default: "/etc/systemd/system/%{lookup($supervisor::system_service)}"

  @param log_level
    Log level. Default: info

  @param logfile
    Main log file.
    Default: /var/log/supervisor/supervisord.log

  @param logfile_maxbytes
    The maximum number of bytes that may be consumed by the activity log
    file before it is rotated.
    Default: 500MB

  @param logfile_backups
    The number of backups to keep around resulting from activity log
    file rotation.
    Default: 10

  @param minfds
    The minimum number of file descriptors that must be available before
    supervisord will start successfully.
    Default: 1024

  @param minprocs
    The minimum number of process descriptors that must be available before
    supervisord will start successfully.
    Default: 200

  @param nocleanup
    Prevent supervisord from clearing any existing AUTO child log files at startup time. Useful for debugging. Default: false

  @param package
    Supervisor package name - to install

  @param package_ensure
    Whether or not to install supervisor package
    Default: true

  @param package_install_options
    Install options for the supervisor package. E.g. enable / disable certain package repositories. Default: []

  @param package_manage
    Manage Supervisor package or not
    Default: true

  @param package_provider
    Provider to install package
    Default: pip

  @param plugins
    Array of plugins to install

  @param recurse_config_dir
    Remove unmanaged files from config directory.
    Default: false

  @param service
    Hash to define the supervisor services you would like to define / manage. Default: {}

  @param supervisor_environment
    A list of key/value pairs in the form KEY=val,KEY2=val2 that will be
    placed in the supervisord process environment.
    Default: undef

  @param system_service
    Service name

  @param system_service_active
    Ensure if service is active or not.
    Default: true

  @param system_service_enable
    Start service at boot.
    Default: true

  @param system_service_manage
    Whether or not to manage the supervisord system service. Default: true

  @param umask
    The umask of the supervisord process.
    Default: 022

  @param user
    If supervisord is run as the root user, switch users to this UNIX user
    account before doing any meaningful processing.
    Default: undef

  @param user_manage
    Whether or not to install and manage the supervisor user. Default: false

Actions:
  Installs supervisor.

Sample Usage:
  class { 'supervisor': }

Notes:
  You should always invoke the supervisor::service definition instead. Check that readme.

#### Parameters

The following parameters are available in the `supervisor` class:

* [`autoupgrade`](#autoupgrade)
* [`bin_dir`](#bin_dir)
* [`childlogdir`](#childlogdir)
* [`chmod`](#chmod)
* [`chown`](#chown)
* [`conf_dir`](#conf_dir)
* [`conf_ext`](#conf_ext)
* [`conf_file`](#conf_file)
* [`dir_ensure`](#dir_ensure)
* [`enable_inet_server`](#enable_inet_server)
* [`file_ensure`](#file_ensure)
* [`identifier`](#identifier)
* [`include_files`](#include_files)
* [`inet_server_pass`](#inet_server_pass)
* [`inet_server_port`](#inet_server_port)
* [`inet_server_user`](#inet_server_user)
* [`init_script`](#init_script)
* [`log_level`](#log_level)
* [`logfile`](#logfile)
* [`logfile_backups`](#logfile_backups)
* [`logfile_maxbytes`](#logfile_maxbytes)
* [`minfds`](#minfds)
* [`minprocs`](#minprocs)
* [`nocleanup`](#nocleanup)
* [`package`](#package)
* [`package_ensure`](#package_ensure)
* [`package_install_options`](#package_install_options)
* [`package_manage`](#package_manage)
* [`package_provider`](#package_provider)
* [`plugins`](#plugins)
* [`recurse_config_dir`](#recurse_config_dir)
* [`service`](#service)
* [`supervisor_environment`](#supervisor_environment)
* [`system_service`](#system_service)
* [`system_service_active`](#system_service_active)
* [`system_service_enable`](#system_service_enable)
* [`system_service_manage`](#system_service_manage)
* [`umask`](#umask)
* [`user`](#user)
* [`user_manage`](#user_manage)

##### <a name="autoupgrade"></a>`autoupgrade`

Data type: `Boolean`



##### <a name="bin_dir"></a>`bin_dir`

Data type: `Stdlib::Absolutepath`



##### <a name="childlogdir"></a>`childlogdir`

Data type: `Stdlib::Absolutepath`



##### <a name="chmod"></a>`chmod`

Data type: `Optional[Boolean]`



##### <a name="chown"></a>`chown`

Data type: `Optional[Boolean]`



##### <a name="conf_dir"></a>`conf_dir`

Data type: `Stdlib::Absolutepath`



##### <a name="conf_ext"></a>`conf_ext`

Data type: `String`



##### <a name="conf_file"></a>`conf_file`

Data type: `Stdlib::Absolutepath`



##### <a name="dir_ensure"></a>`dir_ensure`

Data type: `String`



##### <a name="enable_inet_server"></a>`enable_inet_server`

Data type: `Boolean`



##### <a name="file_ensure"></a>`file_ensure`

Data type: `String`



##### <a name="identifier"></a>`identifier`

Data type: `Optional[String]`



##### <a name="include_files"></a>`include_files`

Data type: `Array`



##### <a name="inet_server_pass"></a>`inet_server_pass`

Data type: `Optional[String]`



##### <a name="inet_server_port"></a>`inet_server_port`

Data type: `Optional[String]`



##### <a name="inet_server_user"></a>`inet_server_user`

Data type: `Optional[String]`



##### <a name="init_script"></a>`init_script`

Data type: `Stdlib::Absolutepath`



##### <a name="log_level"></a>`log_level`

Data type: `String`



##### <a name="logfile"></a>`logfile`

Data type: `Stdlib::Absolutepath`



##### <a name="logfile_backups"></a>`logfile_backups`

Data type: `Integer`



##### <a name="logfile_maxbytes"></a>`logfile_maxbytes`

Data type: `String`



##### <a name="minfds"></a>`minfds`

Data type: `Integer`



##### <a name="minprocs"></a>`minprocs`

Data type: `Integer`



##### <a name="nocleanup"></a>`nocleanup`

Data type: `Boolean`



##### <a name="package"></a>`package`

Data type: `String`



##### <a name="package_ensure"></a>`package_ensure`

Data type: `String`



##### <a name="package_install_options"></a>`package_install_options`

Data type: `Array`



##### <a name="package_manage"></a>`package_manage`

Data type: `Boolean`



##### <a name="package_provider"></a>`package_provider`

Data type: `String`



##### <a name="plugins"></a>`plugins`

Data type: `Array`



##### <a name="recurse_config_dir"></a>`recurse_config_dir`

Data type: `Boolean`



##### <a name="service"></a>`service`

Data type: `Optional[Hash]`



##### <a name="supervisor_environment"></a>`supervisor_environment`

Data type: `Optional[String]`



##### <a name="system_service"></a>`system_service`

Data type: `String`



##### <a name="system_service_active"></a>`system_service_active`

Data type: `Boolean`



##### <a name="system_service_enable"></a>`system_service_enable`

Data type: `Boolean`



##### <a name="system_service_manage"></a>`system_service_manage`

Data type: `Boolean`



##### <a name="umask"></a>`umask`

Data type: `String`



##### <a name="user"></a>`user`

Data type: `Optional[String]`



##### <a name="user_manage"></a>`user_manage`

Data type: `Optional[Boolean]`



## Defined types

### <a name="supervisorservice"></a>`supervisor::service`

Actions:
  Set up a daemon to be run by supervisor

#### Parameters

The following parameters are available in the `supervisor::service` defined type:

* [`command`](#command)
* [`ensure`](#ensure)
* [`enable`](#enable)
* [`numprocs`](#numprocs)
* [`numprocs_start`](#numprocs_start)
* [`priority`](#priority)
* [`autorestart`](#autorestart)
* [`startsecs`](#startsecs)
* [`retries`](#retries)
* [`exitcodes`](#exitcodes)
* [`stopsignal`](#stopsignal)
* [`stopwait`](#stopwait)
* [`user`](#user)
* [`group`](#group)
* [`redirect_stderr`](#redirect_stderr)
* [`directory`](#directory)
* [`stdout_logfile`](#stdout_logfile)
* [`stdout_logfile_keep`](#stdout_logfile_keep)
* [`stdout_logfile_maxsize`](#stdout_logfile_maxsize)
* [`stderr_logfile`](#stderr_logfile)
* [`stderr_logfile_keep`](#stderr_logfile_keep)
* [`stderr_logfile_maxsize`](#stderr_logfile_maxsize)
* [`environment`](#environment)
* [`umask`](#umask)
* [`process_group`](#process_group)

##### <a name="command"></a>`command`

Data type: `String`

Command to run

##### <a name="ensure"></a>`ensure`

Data type: `String`

Ensure service. Default: present

Default value: `present`

##### <a name="enable"></a>`enable`

Data type: `Boolean`

Enable service. Default: true

Default value: ``true``

##### <a name="numprocs"></a>`numprocs`

Data type: `Integer`

Number of procs to run. Default: 1

Default value: `1`

##### <a name="numprocs_start"></a>`numprocs_start`

Data type: `Integer`

An integer offset that is used to compute the number at which process_num starts. Default: 0

Default value: `0`

##### <a name="priority"></a>`priority`

Data type: `Integer`

The relative priority of the program in the start and shutdown ordering. Default: 999

Default value: `999`

##### <a name="autorestart"></a>`autorestart`

Data type: `String`

Specifies if supervisord should automatically restart a process if it exits when it is in the RUNNING state. Default: unexpected

Default value: `'unexpected'`

##### <a name="startsecs"></a>`startsecs`

Data type: `Integer`

The total number of seconds which the program needs to stay running after a startup to consider the start successful

Default value: `1`

##### <a name="retries"></a>`retries`

Data type: `Integer`

The number of serial failure attempts that supervisord will allow when attempting to start the program before giving up and putting the process into an FATAL state.

Default value: `3`

##### <a name="exitcodes"></a>`exitcodes`

Data type: `String`

The list of "expected" exit codes for this program used with autorestart

Default value: `'0,2'`

##### <a name="stopsignal"></a>`stopsignal`

Data type: `String`

The signal used to kill the program when a stop is requested. Default: TERM

Default value: `'TERM'`

##### <a name="stopwait"></a>`stopwait`

Data type: `Integer`

The number of seconds to wait for the OS to return a SIGCHLD to supervisord after the program has been sent a stopsigna. Default: 10

Default value: `10`

##### <a name="user"></a>`user`

Data type: `String`

Instruct supervisord to use this UNIX user account as the account which runs the program

Default value: `'root'`

##### <a name="group"></a>`group`

Data type: `String`



Default value: `'root'`

##### <a name="redirect_stderr"></a>`redirect_stderr`

Data type: `Boolean`

If true, cause the process' stderr output to be sent back to supervisord on its stdout file descriptor

Default value: ``false``

##### <a name="directory"></a>`directory`

Data type: `Optional[Stdlib::Absolutepath]`



Default value: ``undef``

##### <a name="stdout_logfile"></a>`stdout_logfile`

Data type: `Stdlib::Absolutepath`

Put process stdout output in this file

Default value: ``undef``

##### <a name="stdout_logfile_keep"></a>`stdout_logfile_keep`

Data type: `Integer`

The number of stdout_logfile backups to keep around resulting from process stdout log file rotation. Default: 10

Default value: `10`

##### <a name="stdout_logfile_maxsize"></a>`stdout_logfile_maxsize`

Data type: `String`

The maximum number of bytes that may be consumed by stdout_logfile. Default: 250MB

Default value: `'250MB'`

##### <a name="stderr_logfile"></a>`stderr_logfile`

Data type: `Stdlib::Absolutepath`

Put process stderr output in this file. Default: false

Default value: ``undef``

##### <a name="stderr_logfile_keep"></a>`stderr_logfile_keep`

Data type: `Integer`

The number of sterr_logfile backups to keep around resulting from process stdout log file rotation. Default: 10

Default value: `10`

##### <a name="stderr_logfile_maxsize"></a>`stderr_logfile_maxsize`

Data type: `String`

The maximum number of bytes that may be consumed by stderr_logfile. Default: 250MB

Default value: `'250MB'`

##### <a name="environment"></a>`environment`

Data type: `Optional[String]`

A list of key/value pairs in the form KEY="val",KEY2="val2" that will be placed in the child processâ€™ environment.

Default value: ``undef``

##### <a name="umask"></a>`umask`

Data type: `Optional[String]`

An octal number (e.g. 002, 022) representing the umask of the process. Default: undef

Default value: ``undef``

##### <a name="process_group"></a>`process_group`

Data type: `Optional[String]`



Default value: ``undef``

